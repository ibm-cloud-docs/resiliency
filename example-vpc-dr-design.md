---

copyright:
   years: 2020, 2025
lastupdated: "2025-08-13"

keywords: DR testing, disaster recovery test, testing for a disaster scenario, dry test, switch over, DR simulation, vpc

subcollection: resiliency

---

{{site.data.keyword.attribute-definition-list}}

# Basic DR design for {{site.data.keyword.cloud_notm}} VPC
{: #basic-vpc-dr-design}

This page describes an example design that can be used as a low-cost, cross-region disaster recovery solution for a simple application running in an {{site.data.keyword.cloud_notm}} VPC. You can use this design as a starting point for protecting your {{site.data.keyword.cloud_notm}} VPC against a disaster. Modify and test the design to meet your specific disaster recovery goals.

In this example, the VPC is configured with with a total of three virtual server instances, with each instance running in a separate zone of a multi-zone region. The VPC has a load balancer, which is configured to direct inbound connections to one of the virtual server instances. Each virtual server instance has a dedicated block storage volume attached, which contains application code and logs generated by the application. Each virtual server instance is also attached to a file storage share.

## Architecture
{: #vpc-dr-architecture}

The following diagram shows the basic architecture of the DR design. The components that it uses are as follows:

* {{site.data.keyword.bplong_notm}}
* {{site.data.keyword.cloud_notm}} Backup for VPC, including an IBM-managed Object Storage bucket
* File share replication

![Diagram showing a basic VPC DR architecture](images/simple-vpc-dr-arch.svg "An example architecture for a basic VPC solution"){: caption="An example architecture for a basic VPC solution" caption-side="bottom"}


## How it works
{: #vpc-dr-how-it-works}

There are three parts to this design, as follows:

### Part 1 - {{site.data.keyword.bplong_notm}}
{: #vpc-schematics}

The first part of this design uses Infrastructure as Code (IaC). IaC, in the form of Terraform scripts, enables you to create, amend and destroy infrastructure, including VPC infrastructure, using {{site.data.keyword.bplong_notm}}. While using IaC is optional, it is a recommended best practice for ensuring the fast and accurate creation of infrastructure environments. Be sure to use appropriate parameters within your scripts so that the scripts can be used across environments. Also ensure your scripts are well maintained and up to date.

For more information, see [Getting started with Terraform on IBM Cloud](/docs/ibm-cloud-provider-for-terraform?topic=ibm-cloud-provider-for-terraform-getting-started).

### Part 2 - Backup for VPC
{: #vpc-backup-for-vpc}

The second part of the design is the use of Backup for VPC. Using Backup for VPC, snapshots can be taken of the block storage volumes and copied to the DR region (known as a 'cross-regional copy'). These snapshots can then be recovered in the DR region in the event of a disaster. Snapshots are cumulative, meaning that the first snapshot contains all data, while subsequent snapshots only contain changes. Creating the initial snapshot copy in the remote region can take some time, especially if the volumes are large. The number of snapshots that are stored will depend on your backup policy. Create backup policies that are suitable for your data and recovery point objective (RTO). Note backup snapshots are stored within IBM-managed Cloud Object Storage buckets.

### Part 3 - File Storage Replication
{: #vpc-file-storage-replication}

You should also use Backup for VPC to take backups of file storage. However, you cannot create a copy of a file storage backup in another region. Therefore, the third part of this design uses cross-region file storage replication to create a read-only copy of the file storage in the recovery region. In the event of a disaster, the read-only copy can be elevated to read-write, as the new primary share. Replication is asynchronous and replication can be scheduled as often as every 15 minutes.

Note that file share replication between regions must occur within the same geography. This means that shares that reside in the Americas can only replicate to other regions in the Americas, shares that reside in Europe can only replicate other to regions in Europe and shares that reside in Asia can only replicate to other regions in Asia. See [About file share replicaton](/docs/vpc?topic=vpc-file-storage-replication) for more details.

## How to enact a recovery
{: #vpc-enact-recovery}

Once you have declared a disaster and decided to move operations to your target DR region, the first step is to recreate your VPC. If you have chosen to use IaC, then {{site.data.keyword.bplong_notm}} can be used to run your Terraform scripts and build out your VPC environment. Once complete, ensure that you have all the infrastructure you need and that your network is correctly configured.

Next, restore your block storage volumes from the backup snapshots made by Backup for VPC and attach them to your new virtual server instances. For more information, see [About restoring a volume from a backup snapshot](/docs/vpc?topic=vpc-baas-vpc-restore&interface=ui#baas-vpc-restore-concepts).

Finally, failover the replicated file share. See [Failover in a disaster recovery situaton](/docs/vpc?topic=vpc-file-storage-failover&interface=ui#fs-failover-dr) for more details.

You will also need to direct application traffic to the recovered VPC environment.

## Failback
{: #vpc-failback}

Once the region that has suffered a disaster is declared fully operational, your VPC will be ready to use in the recovered region. If you made configuration changes to your VPC within 24 hours of the disaster, check that those configuration changes have been included in the automated recovery of your VPC. IBM Cloud backups up VPC configrations once per day. If configuration is missing, you will need to replay those changes.

You will need to recover any missing data to the block storage volumes and to the file share. This can be done by reversing the process used to recovery at the disaster recovery region.

## Testing your DR
{: #vpc-dr-testing}

It is important that you regularly test your ability to recover your VPC, data and applications. This will provide assurance that you understand the process and can quickly enact a successful recovery. Most importantly, it will provide you with some indication as to how long it might take to rebuild your VPC, to recover your data and to restore service in the event of a real disaster. Understanding how long a recovery takes, will help you to understand your Recovery Time Objective (RTO) options.

## Other considerations
{: #vpc-dr-other-considerations}

These are considerations when creating a DR strategy for {{site.data.keyword.cloud_notm}} VPC.

### Maintain a standby presence
{: #vpc-dr-standby}

The example above suggests using Terraform to rebuild a complete VPC environment in the event of a disaster. Creating a VPC from scratch can take time. To reduce the time it might take to build out and configure the environment, consider maintaining a minimal standby environment, which can autoscale when needed.

### Reserve Capacity
{: #vpc-reserve-capacity}

A regional disaster may cause many customers to enact their disaster recovery plans, which may temporarily create infrastructure shortages in neighboring regions. Consider reserving capacity in your DR region of choice, especially if you have large-scale capacity requirements.

### Use suitable backup and recovery tooling
{: vpc-tooling}

While IBM Cloud backup and file share replication is a good solution for many use-cases, every application has a set of unique considerations when it comes to data backup and recovery. IBM Cloud Backup uses snapshots. Some applications may not be recoverable through the use of snapshots and may require other backup and recovery tooling, such as [Veeam](/docs/vpc?topic=vpc-about-veeam&interface=ui).

## Further reading
{: #vpc-dr-further-reading}

For additional information on backup, restore and DR for {{site.data.keyword.cloud_notm}} VPC, refer to the following documentation pages:

* [About Backup for VPC](/docs/vpc?topic=vpc-backup-service-about&interface=ui)
* [Understanding high availability and disaster recovery for IBM Cloud VPC](/docs/vpc?topic=vpc-ha-dr-vpc&interface=ui)
