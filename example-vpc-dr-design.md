---

copyright:
   years: 2020, 2025
lastupdated: "2025-08-26"

keywords: DR testing, disaster recovery test, testing for a disaster scenario, dry test, switch over, DR simulation, vpc

subcollection: resiliency

---

{{site.data.keyword.attribute-definition-list}}

# Basic DR design for {{site.data.keyword.cloud_notm}} VPC
{: #basic-vpc-dr-design}

Described here is a design for a low-cost, cross-region VPC disaster recovery solution. You can use this design as a starting point for protecting your {{site.data.keyword.cloud_notm}} VPC workloads against a disaster. Modify and test the design to meet your specific disaster recovery goals.

In this example, the VPC is configured with a total of three virtual server instances, where each instance runs in a separate zone of a multi-zone region. The VPC has a load balancer, which is configured to direct inbound connections to one of the virtual server instances. Each virtual server instance has a dedicated block storage volume attached, which contains application code and logs generated by the application. Each virtual server instance is also attached to a file storage share.

## Architecture
{: #vpc-dr-architecture}

The following diagram shows the basic architecture of the DR design. The components that it uses are as follows:

* {{site.data.keyword.bplong_notm}}
* {{site.data.keyword.cloud_notm}} Backup for VPC, including an IBM-managed Object Storage bucket
* File share replication

![Diagram showing a basic VPC DR architecture](images/simple-vpc-dr-arch.svg "An example architecture for a basic VPC solution"){: caption="An example architecture for a basic VPC solution" caption-side="bottom"}


## How it works
{: #vpc-dr-how-it-works}

This design has three parts.

### Part 1 - {{site.data.keyword.bplong_notm}}
{: #vpc-schematics}

The first part of this design uses Infrastructure as Code (IaC). IaC, in the form of Terraform scripts. Terraform can create, amend, and destroy infrastructure, including VPC infrastructure, by using {{site.data.keyword.bplong_notm}}. The use of IaC is optional, but it is a best practice to help ensure the fast and accurate creation of infrastructure environments, in a repeatable manner. Be sure to use appropriate parameters within your scripts so that they can be used across environments. Maintain your scripts under source code control.

For more information, see [Getting started with Terraform on IBM Cloud](/docs/ibm-cloud-provider-for-terraform?topic=ibm-cloud-provider-for-terraform-getting-started).

### Part 2 - Backup for VPC
{: #vpc-backup-for-vpc}

The second part of the design is the use of Backup for VPC. Using Backup for VPC, snapshots can be taken of the block storage volumes and copied to the DR region (known as a 'cross-regional copy'). These snapshots can be recovered in the DR region if a disaster strikes. Snapshots are cumulative, meaning that the first snapshot contains all data, while subsequent snapshots contain changes. Creating the initial snapshot copy in the remote region can take some time, especially if the volumes are large. The number of snapshots that are stored depends on your backup policy. Create backup policies that are suitable for your data and recovery point objective (RTO). Note backup snapshots are stored within IBM-managed Cloud Object Storage buckets.

### Part 3 - File Storage Replication
{: #vpc-file-storage-replication}

Use Backup for VPC to take backups of file storage. You cannot create a copy of a file storage backup in another region. Therefore, the third part of this design uses cross-region file storage replication to create a read-only copy of the file storage in the recovery region. If a disaster strikes, the read-only copy can be elevated to read/write, as the new primary share. Replication is asynchronous and replication can be scheduled as often as every 15 minutes.

Remember, file share replication between regions must occur within the same geography. Shares that are located in the Americas only replicate to other regions in the Americas. Shares that are located in Europe only replicate other to regions in Europe. Shares that are located in Asia only replicate to other regions in Asia. See [About file share replication](/docs/vpc?topic=vpc-file-storage-replication) for more details.

## How to enact a recovery
{: #vpc-enact-recovery}

After you declare a disaster and decide to move operations to your target DR region, the first step is to re-create your VPC. If you chose to use IaC, then {{site.data.keyword.bplong_notm}} can be used to run your Terraform scripts and build out your VPC environment. On completion, make sure that you have all the infrastructure you need and that your network is correctly configured.

Next, restore your block storage volumes from the backup snapshots made by Backup for VPC and attach them to your new virtual server instances. For more information, see [About restoring a volume from a backup snapshot](/docs/vpc?topic=vpc-baas-vpc-restore&interface=ui#baas-vpc-restore-concepts).
Next, restore your block storage volumes from the backup snapshots that are made by Backup for VPC and attach them to your new virtual server instances. For more information, see [About restoring a volume from a backup snapshot](/docs/vpc?topic=vpc-baas-vpc-restore&interface=ui#baas-vpc-restore-concepts).

Finally, failover the replicated file share. See [Failover in a disaster recovery situation](/docs/vpc?topic=vpc-file-storage-failover&interface=ui#fs-failover-dr) for more details.

You will need to direct application traffic to the recovered VPC environment.

## Failback
{: #vpc-failback}

After the region that suffered a disaster is declared fully operational, your VPC is ready to use in the recovered region. If you made configuration changes to your VPC within 24 hours of the disaster, check that those configuration changes are included in the automated recovery of your VPC. IBM Cloud backs up VPC configurations once per day. If configuration is missing, you need to replay those changes.

You need to recover any missing data to the block storage volumes and to the file share. Recovery can be accomplished by reversing the process that is used for recovery at the disaster recovery region.

## Testing your DR
{: #vpc-dr-testing}

Regularly test your ability to recover your VPC, data, and applications. Testing provides assurance that you understand the process and can quickly enact a successful recovery. Testing also provides an indication as to how long it takes to rebuild your VPC, to recover your data, and to restore your service to users. Understanding how long a recovery takes helps you to understand your Recovery Time Objective (RTO) options.

## Other considerations
{: #vpc-dr-other-considerations}

When creating a DR strategy for {{site.data.keyword.cloud_notm}} VPC, make sure that the options you choose fit with your Recovery Time Objective (RTO) and Recovery Point Object (RTO) goals.

### Maintain a standby presence
{: #vpc-dr-standby}

The preceding example suggests the use of Terraform to rebuild a complete VPC environment if a disaster strikes. Creating a VPC from scratch can take time. To reduce the time it takes to build out and configure the environment - in other words to meet a more aggressive RTO, consider maintaining a minimal, autoscaling standby environment.

### Reserve Capacity
{: #vpc-reserve-capacity}

A regional disaster can cause many customers to activate their disaster recovery plans, which can temporarily create infrastructure shortages in neighboring regions. Consider reserving capacity in your DR region of choice, especially if you have large-scale capacity requirements.

### Use suitable backup and recovery tools
{: vpc-tooling}

While IBM Cloud Backup and file share replication is a good solution for many use-cases, every application has a set of unique considerations for data backup and recovery. IBM Cloud Backup uses snapshots. Some applications may not be recoverable by using snapshots and can require other backup and recovery tools, such as [Veeam](/docs/vpc?topic=vpc-about-veeam&interface=ui).

## Further reading
{: #vpc-dr-further-reading}

For additional information on backup, restore and DR for {{site.data.keyword.cloud_notm}} VPC, refer to the following documentation pages:

* [About Backup for VPC](/docs/vpc?topic=vpc-backup-service-about&interface=ui)
* [Understanding high availability and disaster recovery for IBM Cloud VPC](/docs/vpc?topic=vpc-ha-dr-vpc&interface=ui)
