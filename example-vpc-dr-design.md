---

copyright:
   years: 2020, 2025
lastupdated: "2025-10-16"

keywords: DR testing, disaster recovery test, testing for a disaster scenario, dry test, switch over, DR simulation, vpc

subcollection: resiliency

---

{{site.data.keyword.attribute-definition-list}}

# Designing DR for {{site.data.keyword.cloud_notm}} VPC
{: #basic-vpc-dr-design}

Protecting your {{site.data.keyword.cloud_notm}} VPC workloads via a disaster recovery solution can be achieved in any number of ways. However, to help you create a plan, consider starting with one of the following design options for a cross-region solution. Then, you can modify and test the options to meet your specific disaster recovery goals.

In this example, the VPC is configured with a total of three virtual server instances, where each instance runs in a separate zone of a multi-zone region. The VPC has a load balancer, which is configured to direct inbound connections to one of the virtual server instances. Each virtual server instance has a dedicated block storage volume attached, which contains application code and logs generated by the application. Each virtual server instance is also attached to a file storage share.

{{site.data.keyword.bplong_notm}}
:   The first part of the design uses Infrastructure as Code (IaC) in the form of Terraform scripts to create, amend, and destroy infrastructure by using {{site.data.keyword.bplong_notm}}. This is optional, but is a best practice to help ensure the fast, accurate, and repeatable creation of your environments. Be sure to use appropriate parameters within your scripts so that they can be used across environments and be sure that your scripts are maintained in a source controlled manner. For more information, see [Getting started with Terraform on IBM Cloud](/docs/ibm-cloud-provider-for-terraform?topic=ibm-cloud-provider-for-terraform-getting-started).

Backup for VPC
:   The second part of the design is to use Backup for VPC to take snapshots of the block storage volumes in order to copy them to the DR region so that they can be recovered in the event of an outage. Snapshots are cumulative, meaning that the first snapshot contains all of the data while subsequent snapshots contain changes. Creating the initial snapshot copy in the remote region can take some time, especially if the volumes are large. The number of snapshots that are stored depends on your backup policy - which is subject to your data and recovery point objectives. Note that backup snapshots are stored within IBM-managed Cloud Object Storage buckets.

File storage replication
:   The third part of the design is to use cross-region file storage replication to create a read-only copy of the file storage in the recovery region. If disaster strikes, the read-only copy can be elevated to read / write and the new primary share. Replication is asynchronous and can be scheduled as often as every 15 minutes. Remember, file share replication must occur within the same geography meaning that shares located in the America's only replicate to other regions in the Americas, shares in Europe replicate only to other European regions and so on. See [About file share replication](/docs/vpc?topic=vpc-file-storage-replication) for more details.


## Understanding the architecture
{: #vpc-dr-architecture}

The following diagram shows the basic architecture of the DR design. The components that it uses are as follows:

* {{site.data.keyword.bplong_notm}}
* {{site.data.keyword.cloud_notm}} Backup for VPC, including an IBM-managed Cloud Object Storage bucket
* File share replication

![Diagram showing a basic VPC DR architecture](images/simple-vpc-dr-arch.svg "An example architecture for a basic VPC solution"){: caption="An example architecture for a basic VPC solution" caption-side="bottom"}


## Enacting a recovery
{: #vpc-enact-recovery}

After you declare a disaster, you decide that you need to move operations to a target disaster recovery region by directing application traffic to a new VPC environment in that region. The first step is to re-create your VPC. If you chose to use IaC, then {{site.data.keyword.bplong_notm}} can be used to run your Terraform scripts and build out your VPC environment. On completion, validate that you have all the infrastructure that you need and that your network is correctly configured.

Next, restore your block storage volumes from the backup snapshots made by Backup for VPC and attach them to your new virtual server instances. For more information, see [About restoring a volume from a backup snapshot](/docs/vpc?topic=vpc-baas-vpc-restore&interface=ui#baas-vpc-restore-concepts).

Finally, failover the replicated file share. See [Failover in a disaster recovery situation](/docs/vpc?topic=vpc-file-storage-failover&interface=ui#fs-failover-dr) for more details.


## Failing back
{: #vpc-failback}

After the region that suffered a disaster is declared fully operational, your VPC is ready to use in the recovered region. If you made configuration changes to your VPC within 24 hours of the disaster, check that those configuration changes are included in the automated recovery of your VPC. IBM Cloud backs up VPC configurations once per day. If configuration is missing, replay those changes.

You need to recover any missing data to the block storage volumes and to the file share. Recovery can be accomplished by reversing the process that is used for recovery in the disaster recovery region.

## Testing your DR
{: #vpc-dr-testing}

Regularly test your ability to recover your VPC, data, and applications. Testing provides assurance that you understand the process and can quickly enact a successful recovery. Testing also provides an indication as to how long it takes to rebuild your VPC, to recover your data, and to restore your service to users. Understanding how long a recovery takes helps you to understand your Recovery Time Objective (RTO) options.

## Understanding other considerations
{: #vpc-dr-other-considerations}

When creating a DR strategy for {{site.data.keyword.cloud_notm}} VPC, make sure that the options you choose fit with your Recovery Time Objective (RTO) and Recovery Point Object (RTO) goals.

### Maintaining a standby presence
{: #vpc-dr-standby}

The preceding example suggests the use of Terraform to rebuild a complete VPC environment if a disaster strikes. Creating a VPC from scratch can take time. To reduce the time it takes to build out and configure the environment - in other words to meet a more aggressive RTO, consider maintaining a minimal, autoscaling standby environment.

### Reserving capacity
{: #vpc-reserve-capacity}

A regional disaster can cause many customers to activate their disaster recovery plans, which can temporarily create infrastructure shortages in neighboring regions. Consider reserving capacity in your DR region of choice, especially if you have large-scale capacity requirements.

### Using suitable tools
{: vpc-tooling}

While IBM Cloud Backup and file share replication is a good solution for many use-cases, every application has a set of unique considerations for data backup and recovery. IBM Cloud Backup uses snapshots. Some applications may not be recoverable by using snapshots and can require other backup and recovery tools, such as [Veeam](/docs/vpc?topic=vpc-about-veeam&interface=ui).

## Further reading
{: #vpc-dr-further-reading}

For additional information on backup, restore and DR for {{site.data.keyword.cloud_notm}} VPC, refer to the following documentation pages:

* [About Backup for VPC](/docs/vpc?topic=vpc-backup-service-about&interface=ui)
* [Understanding high availability and disaster recovery for IBM Cloud VPC](/docs/vpc?topic=vpc-ha-dr-vpc&interface=ui)
